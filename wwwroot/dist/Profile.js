!function(e){var t={};function r(a){if(t[a])return t[a].exports;var l=t[a]={i:a,l:!1,exports:{}};return e[a].call(l.exports,l,l.exports,r),l.l=!0,l.exports}r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)r.d(a,l,function(t){return e[t]}.bind(null,l));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=7)}([function(e,t){e.exports=React},function(e,t){e.exports=ReactDOM},,,,,,function(e,t,r){"use strict";var a=this&&this.__awaiter||function(e,t,r,a){return new(r||(r=Promise))(function(l,o){function s(e){try{d(a.next(e))}catch(e){o(e)}}function n(e){try{d(a.throw(e))}catch(e){o(e)}}function d(e){e.done?l(e.value):new r(function(t){t(e.value)}).then(s,n)}d((a=a.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const l=r(0),o=r(1),s=(e,t,r="")=>l.createElement("div",{className:"col-8"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-8"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-6"},l.createElement("strong",null,e)),l.createElement("div",{className:"col-6"},l.createElement("p",{className:"text-right"},t))),l.createElement("hr",{style:{marginTop:"0"}})),""!=r?l.createElement("div",{className:"col-4"},l.createElement("button",{className:"btn btn-primary","data-toggle":"modal","data-target":"#"+r},"Change")):null));class n extends l.Component{constructor(e){super(e),this.f=this.f.bind(this),this.getOrders=this.getOrders.bind(this),this.ToggleOrderInfo=this.ToggleOrderInfo.bind(this),this.ToggleOrderInfoOff=this.ToggleOrderInfoOff.bind(this),this.getOrders(),this.state={Orders:null,ToggleOrderInfo:null}}f(){console.log("Test")}getOrders(){return a(this,void 0,void 0,function*(){yield fetch("/Order/GetOrders",{credentials:"same-origin"}).then(e=>{e.json().then(e=>{this.setState({Orders:e})})})})}ToggleOrderInfo(e){this.setState({ToggleOrderInfo:e})}ToggleOrderInfoOff(){this.setState({ToggleOrderInfo:null})}render(){return l.createElement("div",null,l.createElement("h3",null,"Your Account"),l.createElement("h4",{className:"text-primary"},"Personal Information"),s("Invoice billed to",this.props.user.name+" "+this.props.user.surname,"userInfoModal"),l.createElement("div",{className:"modal fade",id:"userInfoModal",tabIndex:-1,role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"},l.createElement("div",{className:"modal-dialog modal-dialog-centered",role:"document"},l.createElement("div",{className:"modal-content"},l.createElement("div",{className:"modal-header"},l.createElement("h5",{className:"modal-title",id:"exampleModalLongTitle"},"Change Name and Surname"),l.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},l.createElement("span",{"aria-hidden":"true"},"×"))),l.createElement("div",{className:"modal-body"},l.createElement("form",{className:"needs-validation",id:"ChangeUserInfoForm",method:"POST",action:"/User/ChangeName",noValidate:!0},l.createElement("div",{className:"form-group row"},l.createElement("label",{htmlFor:"Name",className:"col-sm-4 col-form-label"},"New First Name"),l.createElement("div",{className:"col-sm-8"},l.createElement("input",{type:"text",className:"form-control",id:"Name",placeholder:"First Name",name:"Name",required:!0,maxLength:30}),l.createElement("div",{className:"valid-feedback"},"Looks good!"),l.createElement("div",{className:"invalid-feedback"},"This field is required and cannot be longer than 30 characters."))),l.createElement("div",{className:"form-group row"},l.createElement("label",{htmlFor:"Surname",className:"col-sm-4 col-form-label"},"New Surname"),l.createElement("div",{className:"col-sm-8"},l.createElement("input",{type:"text",className:"form-control",id:"Surname",placeholder:"Surname",name:"Surname",required:!0,maxLength:30}),l.createElement("div",{className:"valid-feedback"},"Looks good!"),l.createElement("div",{className:"invalid-feedback"},"This field is required and cannot be longer than 30 characters."))))),l.createElement("div",{className:"modal-footer"},l.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Close"),l.createElement("button",{type:"submit",form:"ChangeUserInfoForm",className:"btn btn-primary"},"Save changes"))))),s("Email address",this.props.user.email),s("Billing address",this.props.user.street+" "+this.props.user.postalCode,"addressModal"),l.createElement("div",{className:"modal fade",id:"addressModal",tabIndex:-1,role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"},l.createElement("div",{className:"modal-dialog modal-dialog-centered",role:"document"},l.createElement("div",{className:"modal-content"},l.createElement("div",{className:"modal-header"},l.createElement("h5",{className:"modal-title",id:"exampleModalLongTitle"},"Change Address"),l.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},l.createElement("span",{"aria-hidden":"true"},"×"))),l.createElement("div",{className:"modal-body"},l.createElement("form",{className:"needs-validation",id:"ChangeAddressForm",action:"/User/ChangeAddress",method:"POST",noValidate:!0},l.createElement("div",{className:"form-group row"},l.createElement("label",{htmlFor:"Street",className:"col-sm-4 col-form-label"},"New Street"),l.createElement("div",{className:"col-sm-8"},l.createElement("input",{type:"text",className:"form-control",id:"Street",placeholder:"Street",name:"Street",required:!0,maxLength:200}),l.createElement("div",{className:"valid-feedback"},"Looks good!"),l.createElement("div",{className:"invalid-feedback"},"This field is required and cannot be longer than 200 characters."))),l.createElement("div",{className:"form-group row"},l.createElement("label",{htmlFor:"PostalCode",className:"col-sm-4 col-form-label"},"New Postal Code"),l.createElement("div",{className:"col-sm-8"},l.createElement("input",{type:"text",className:"form-control",id:"PostalCode",placeholder:"Postal Code",name:"PostalCode",required:!0,maxLength:6,minLength:6}),l.createElement("div",{className:"valid-feedback"},"Looks good!"),l.createElement("div",{className:"invalid-feedback"},"This field is required and contains 6 characters."))))),l.createElement("div",{className:"modal-footer"},l.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Close"),l.createElement("button",{type:"submit",form:"ChangeAddressForm",className:"btn btn-primary"},"Save changes"))))),s("Birthdate",this.props.user.birthdate.substr(0,10)),s("Password","●●●●●●●●","passwordModal"),l.createElement("div",{className:"modal fade",id:"passwordModal",tabIndex:-1,role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"},l.createElement("div",{className:"modal-dialog modal-dialog-centered",role:"document"},l.createElement("div",{className:"modal-content"},l.createElement("div",{className:"modal-header"},l.createElement("h5",{className:"modal-title",id:"exampleModalLongTitle"},"Change password"),l.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},l.createElement("span",{"aria-hidden":"true"},"×"))),l.createElement("div",{className:"modal-body"},l.createElement("form",{className:"needs-validation",id:"ChangePasswordForm",action:"/User/ChangePassword",method:"POST",noValidate:!0},l.createElement("div",{className:"form-group row"},l.createElement("label",{htmlFor:"Password",className:"col-sm-4 col-form-label"},"New Password"),l.createElement("div",{className:"col-sm-8"},l.createElement("input",{type:"password",className:"form-control",id:"Password",placeholder:"Password",name:"Password",required:!0,minLength:8,maxLength:200,pattern:"^((?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])|(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[^a-zA-Z0-9])|(?=.*?[A-Z])(?=.*?[0-9])(?=.*?[^a-zA-Z0-9])|(?=.*?[a-z])(?=.*?[0-9])(?=.*?[^a-zA-Z0-9])).{8,}$"}),l.createElement("div",{className:"valid-feedback"},"Looks good!"),l.createElement("div",{className:"invalid-feedback"},"Password must be at least 8 characters and contain at 3 of 4 of the following: upper case (A-Z), lower case (a-z), number (0-9) and special character (e.g. !@#$%^&*)"))))),l.createElement("div",{className:"modal-footer"},l.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Close"),l.createElement("button",{type:"submit",form:"ChangePasswordForm",className:"btn btn-primary"},"Save changes"))))),null!=this.state.Orders?l.createElement("div",null,l.createElement("table",{className:"table table-borderless table-hover tableCustom slide-in-blurred-top"},l.createElement("thead",{className:"table-head-custom"},l.createElement("tr",null,l.createElement("th",{scope:"col"},"Date"),l.createElement("th",{scope:"col"},"Address"),l.createElement("th",{scope:"col"},"Order status"),l.createElement("th",{scope:"col"},"Total Price"))),l.createElement("tbody",null,this.state.Orders.map(e=>l.createElement(d,{order:e,ToggleOrderInfo:this.ToggleOrderInfo}))))):null,this.state.ToggleOrderInfo?l.createElement(c,{order:this.state.ToggleOrderInfo,ToggleOrderInfoOff:this.ToggleOrderInfoOff}):null)}}t.ProfilePage=n;class d extends l.Component{constructor(e){super(e),console.log(this.props.order+"is Order row order")}GetTotalPrice(){let e=0;for(let t=0;t<this.props.order.orderItems.length;t++)e+=this.props.order.orderItems[t].priceBought*this.props.order.orderItems[t].amount;return e.toFixed(2)}render(){return 4==this.props.order.orderStatus.statusId?l.createElement("tr",{className:"table-light pointer",onClick:()=>this.props.ToggleOrderInfo(this.props.order)},l.createElement("th",{scope:"row"},this.props.order.date.substr(0,10)),l.createElement("td",null,this.props.order.street+" "+this.props.order.postalCode),l.createElement("td",null,this.props.order.orderStatus.statusName),l.createElement("td",null,"€",this.GetTotalPrice())):3==this.props.order.orderStatus.statusId?l.createElement("tr",{className:"table-light pointer",onClick:()=>this.props.ToggleOrderInfo(this.props.order)},l.createElement("th",{scope:"row"},this.props.order.date.substr(0,10)),l.createElement("td",null,this.props.order.street+" "+this.props.order.postalCode),l.createElement("td",null,this.props.order.orderStatus.statusName),l.createElement("td",null,"€",this.GetTotalPrice())):2==this.props.order.orderStatus.statusId?l.createElement("tr",{className:"table-light pointer",onClick:()=>this.props.ToggleOrderInfo(this.props.order)},l.createElement("th",{scope:"row"},this.props.order.date.substr(0,10)),l.createElement("td",null,this.props.order.street+" "+this.props.order.postalCode),l.createElement("td",null,this.props.order.orderStatus.statusName),l.createElement("td",null,"€",this.GetTotalPrice())):1==this.props.order.orderStatus.statusId?l.createElement("tr",{className:"table-light pointer",onClick:()=>this.props.ToggleOrderInfo(this.props.order)},l.createElement("th",{scope:"row"},this.props.order.date.substr(0,10)),l.createElement("td",null,this.props.order.street+" "+this.props.order.postalCode),l.createElement("td",null,this.props.order.orderStatus.statusName),l.createElement("td",null,"€",this.GetTotalPrice())):void 0}}class c extends l.Component{constructor(e){super(e)}render(){return l.createElement("div",{className:"popup slide-in-fwd-center"},l.createElement(m,{ToggleOrderInfoOff:this.props.ToggleOrderInfoOff,order:this.props.order}))}}class m extends l.Component{constructor(e){super(e),this.handleClickOutside=(e=>{const t=o.findDOMNode(this);t&&t.contains(e.target)||this.props.ToggleOrderInfoOff()})}render(){return l.createElement("div",{className:"popUpOrderInner slide-in-fwd-center",style:{overflowY:"scroll",overflowX:"hidden"}},this.props.order.orderItems.map(e=>null!=e.inventory&&null!=e.inventory.product?l.createElement("div",null,l.createElement("div",{className:"row popRowMargin"},l.createElement("div",{className:"col-sm-3"},null!=e.inventory.product.productImages[0]?l.createElement("img",{src:e.inventory.product.productImages[0].url}):null),l.createElement("div",{className:"col-sm-4"},l.createElement("h4",null,e.inventory.product.name," - ",e.inventory.gamePlatform.platformName),l.createElement("p",null,e.inventory.product.description)),l.createElement("div",{className:"col-sm-2 centerTextBlock"},l.createElement("h6",null,"Amount : ",e.amount)),l.createElement("div",{className:"col-sm-2 centerTextBlock"},l.createElement("h6",null,"€",(e.amount*e.priceBought).toFixed(2)))),l.createElement("hr",null)):l.createElement("div",null,l.createElement("h1",null,"Failed"))))}componentDidMount(){document.addEventListener("click",this.handleClickOutside,!0)}componentWillUnmount(){document.removeEventListener("click",this.handleClickOutside,!0)}}!function(){let e=document.currentScript.getAttribute("jsonString");console.log(e);let t=JSON.parse(e);o.render(l.createElement(n,{user:t}),document.getElementById("root"))}()}]);
//# sourceMappingURL=Profile.js.map